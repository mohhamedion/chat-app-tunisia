<!DOCTYPE html>
<html>
<head>
	
	<title>talk with strangers</title>
	    <!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

	<!-- FONT AWESOME -->
	<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

	<style type="text/css">
	html, body
{
    height: 100%;
    background-color: #e3e3e3
}

.mainWeb {
background-color: #c63f41;
}

.primary{
	color: #fff;
	background-color: #c63f41;
}
a.noStyleAtag{
	color:white;
}

@media (min-width: 1281px) {
  
	#chat_component_father{
	  height: 98%;
  }
}

@media (min-width: 1025px) and (max-width: 1280px) {
	#chat_component_father{
	  height: 98%;
  }
  
}

@media (min-width: 768px) and (max-width: 1024px) {
	#chat_component_father{
	  height: 98%;
  }
  
}

@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
	#chat_component_father{
	  height: 98%;
  }
}

@media (min-width: 481px) and (max-width: 767px) {
	.titleAbout {
	font-size: 20px;
 }
  
  #chat_component_father{
	  height: 91%;
  }
}
 /* 
##Device = Most of the Smartphones Mobiles (Portrait)
##Screen = B/w 320px to 479px
*/

@media (min-width: 320px) and (max-width: 480px) {
	.titleAbout {
		font-size: 17px;

 }
	#chat_component_father{
	  height: 89%;
  }
}



@media   (max-height: 640px)  {

#chat_component_father{
  height:64%;
}
}

 


.footer {
   position: static; 
   width: 100%;
   background-color: #fff;
   color: black;
   text-align: center;
}
 
</style>
</head>
<body>

 
<section>
<nav class="navbar sticky-top navbar-light  mainWeb"  >
  <a class="navbar-brand noStyleAtag " href="">
  	<img src="/logo1.png" style="width: 50px">
  </a>
  <a class="navbar-brand text-white noStyleAtag" ><strong> Admin Dashboard</strong></a>

</nav>

</section>

 <!-- OLD ONE 200PX -->
<section id="index_section" class="tg"  style="min-height: calc(100% - 170px);"  >
	
	        <div class="container">
			
				<table   class="table table-striped">
					<thead>
					  <tr>
						<th>#</th>
						<th>name</th>
						<th>option</th>
					  </tr>
					</thead>
					<tbody class="allUsers">
					
				 
					</tbody>
				  </table>
                    


				</div>

	</div>

 
	
 


   
 
</section> 

<!-- the OLD ONE WAS HERE -->
<!-- 	<div class="footer-copyright text-center  StartChattingHide " style="bottom: 0px;position: static;"> <a href="#" data-toggle="modal" data-target="#exampleModal">Contact us</a> </div>
 -->
<!--  -->
 	<div  class=" mt-4 StartChattingHide ">

		<div class="footer "  >
			<footer class="page-footer font-small blue " >
				<div class=" ">
					<div class="footer-copyright text-center py-3">Â© 2020 all rights reserved </div>

				</div>
 
			</footer>
		 </div>
	</div>
		
 



	<!-- MODAL -->
 
	  
	  <!-- Modal -->
	  <div class="modal fade " id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
		  <div class="modal-content " style="width: 97%;">
			<div class="modal-header primary">
			  <h5 class="modal-title" id="exampleModalLabel">Contacts</h5>
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			  </button>
			</div>
			<div class="modal-body">
				<p>Email: Support@unicaly.com </p>
 	
			
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
 			</div>
		  </div>
		</div>
	  </div>

	  <!-- MODAL -->































 
<script src="/scripts/functions.js" > </script>
<script src="/socket.io/socket.io.js"></script>
<script>
	  var socket = io.connect();
	  let stranger_name;
	  let room;
	  let name=null;
	  let timeout;
	  socket.on('connect',()=>{

            socket.emit("allUsers");




       });
       

	   
       socket.on("allUsers",(users)=>{
        console.log('users');
        console.log(users)
          
		users.forEach(element => {
	 
			console.log(element[1].name)
	 

			$(".allUsers").append(`<tr> <td>#</td> <td>${element[1].name}</td> <td>  <button onClick="kickUser('${element[0]}')" type='button' class='btn btn-danger'>kick</button></td> </tr>`)


		});
 
       })
		socket.on("joinRoom",(data)=>{
 
			stranger_name = data.name;
			room = data.room;
			socket.emit("joinChatRoom",{room:data.room});


		});

function kickUser(user){
 	socket.emit("kick",{id:user});
}

 			let sendFile = document.querySelector("input#sendFile");
			let fileProgress = document.querySelector("progress#fileProgress");
			let downloadLink = document.querySelector('a#receivedFileLink');
	 
			let keyUp=true;
			let configuration = {
				'iceServers': [{
					'url': 'stun:stun.l.google.com:19302'
				}]
			};
			let rtcPeerConn;
			let dataChannelOptions = {
				ordered: false, //no guaranteed delivery, unreliable but faster 
				maxRetransmitTime: 1000, //milliseconds
			};
			let dataChannel;

			let receivedFileName;
			let receivedFileSize;
			let fileBuffer = [];
			let fileSize = 0;




 
                

</script>

<script src="/scripts/messages.js"></script>

<!-- FILE SHARE  -->
<script src="/scripts/files-sender.js"> </script>
</body>
</html>
<!-- BY MOHAMAD AL ASALY -->